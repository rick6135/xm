(function($){var pluginName='selectric',_replaceDiacritics=function(s){var k,d='40-46 50-53 54-57 62-70 71-74 61 47 77'.replace(/\d+/g,'\\3$&').split(' ');for(k in d){if(!d.hasOwnProperty(k))
return;s=s.toLowerCase().replace(RegExp('['+d[k]+']','g'),'aeiouncy'.charAt(k))}
return s},init=function(element,options){var options=$.extend({onOpen:$.noop,onClose:$.noop,onChange:$.noop,maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!0,openOnHover:!1,expandToItemText:!1,responsive:!1,customClass:{prefix:'selectric',postfixes:'Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive',camelCase:!0}},options),customClass=options.customClass,postfixes=customClass.postfixes.split(' '),arrClasses=[],currPostfix;if(options.disableOnMobile&&/android|ip(hone|od|ad)/i.test(navigator.userAgent))return;while(currPostfix=postfixes.shift())
arrClasses.push(customClass.camelCase?customClass.prefix+currPostfix:(customClass.prefix+currPostfix).replace(/([A-Z])/g,"-$&").toLowerCase());var $original=$(element),_input=$('<input type="text" class="'+arrClasses[0]+'"/>'),$wrapper=$('<div class="'+customClass.prefix+'"><p class="label"/>'+options.arrowButtonMarkup+'</div>'),$items=$('<div class="'+arrClasses[1]+'" tabindex="-1"></div>'),$outerWrapper=$original.data(pluginName,!0).wrap('<div>').parent().append($wrapper.add($items).add(_input)),selectItems=[],isOpen,$label=$('.label',$wrapper),$li,bindSufix='.sl',$doc=$(document),$win=$(window),clickBind='click'+bindSufix,resetStr,classOpen=arrClasses[2],classDisabled=arrClasses[3],tempClass=arrClasses[4],selectStr='selected',selected,currValue,itemsHeight,closeTimer,finalWidth,optionsLength,inputEvt='oninput' in _input[0]?'input':'keyup';$original.wrap('<div class="'+arrClasses[5]+'">');function _populate(){var $options=$original.children();_$li='<ul>',selectedIndex=$options.filter(':'+selectStr).index();currValue=(selected=~selectedIndex?selectedIndex:0);if(optionsLength=$options.length){$options.each(function(i){var $elm=$(this),optionText=$elm.html(),selectDisabled=$elm.prop('disabled');selectItems[i]={value:$elm.val(),text:optionText,slug:_replaceDiacritics(optionText),disabled:selectDisabled};if($elm.prop('hidden')==!1||$elm.prop('hidden')==undefined){_$li+='<li class="'+(i==currValue?selectStr:'')+(i==optionsLength-1?' last':'')+(selectDisabled?' disabled':'')+'">'+optionText+'</li>'}});$items.html(_$li+'</ul>');$label.html("Language")}
$wrapper.add($original).off(bindSufix);$outerWrapper.data(pluginName,!0).prop('class',[arrClasses[6],$original.prop('class'),classDisabled,options.responsive?arrClasses[8]:''].join(' '));if(!$original.prop('disabled')){$outerWrapper.removeClass(classDisabled).hover(function(){$(this).toggleClass(arrClasses[7])});_input.prop('disabled',!1);options.openOnHover&&$wrapper.on('mouseenter'+bindSufix,_open);$wrapper.on(clickBind,function(e){isOpen?_close():_open(e)});function _handleSystemKeys(e){if(/^(9|13|27)$/.test(e.keyCode||e.which)){e.stopPropagation();_select(selected,!0)}}
_input.off().on({keypress:_handleSystemKeys,keydown:function(e){_handleSystemKeys(e);clearTimeout(resetStr);resetStr=setTimeout(function(){_input.val('')},options.keySearchTimeout);var key=e.keyCode||e.which;if(key>36&&key<41)
_select(key<39?previousEnabledItem():nextEnabledItem())},focusin:function(e){_input.one('blur',function(){_input.blur()});isOpen||_open(e)}}).on(inputEvt,function(){if(_input.val().length){$.each(selectItems,function(i,elm){if(RegExp('^'+_input.val(),'i').test(elm.slug)&&!elm.disabled){_select(i);return!1}})}});$li=$('li',$items.removeAttr('style')).click(function(){_select($(this).index(),!0);return!1})}else _input.prop('disabled',!0)}
_populate();function _calculateOptionsDimensions(){var visibleParent=$items.closest(':visible').children(':hidden'),maxHeight=options.maxHeight;visibleParent.addClass(tempClass);var itemsWidth=$items.outerWidth(),wrapperWidth=$wrapper.outerWidth()-(itemsWidth-$items.width());if(!options.expandToItemText||wrapperWidth>itemsWidth)
finalWidth=wrapperWidth;else{$items.css('overflow','scroll');$outerWrapper.width(9e4);finalWidth=itemsWidth;$items.css('overflow','');$outerWrapper.width('')}
$items.width(finalWidth).height()>maxHeight&&$items.height(maxHeight);visibleParent.removeClass(tempClass)}
function _open(e){e.preventDefault();e.stopPropagation();_calculateOptionsDimensions();$('.'+classOpen).removeClass(classOpen);isOpen=!0;itemsHeight=$items.outerHeight();_isInViewport();_input.val('').is(':focus')||_input.focus();$doc.on(clickBind,_close);if(options.openOnHover){clearTimeout(closeTimer);$outerWrapper.one('mouseleave'+bindSufix,function(){closeTimer=setTimeout(_close,500)})}
$outerWrapper.addClass(classOpen);_detectItemVisibility(selected);options.onOpen(element)}
function _isInViewport(){if(isOpen){_calculateOptionsDimensions();$items.css('top',($outerWrapper.offset().top+$outerWrapper.outerHeight()+itemsHeight>$win.scrollTop()+$win.height())?-itemsHeight:'');setTimeout(_isInViewport,100)}}
function _close(e){if(!e&&currValue!=selected){var text=selectItems[selected].text;$original.prop('selectedIndex',currValue=selected).data('value',text).trigger('change',[text,currValue]);options.onChange(element);$label.html(text)}
$doc.off(bindSufix);$outerWrapper.removeClass(classOpen);isOpen=!1;options.onClose(element)}
function _select(index,close){if(!selectItems[selected=index].disabled){$li.removeClass(selectStr).eq(index).addClass(selectStr);_detectItemVisibility(index);close&&_close()}}
function _detectItemVisibility(index){var liHeight=$li.eq(index).outerHeight(),liTop=$li[index].offsetTop,itemsScrollTop=$items.scrollTop(),scrollT=liTop+liHeight*2;$items.scrollTop(scrollT>itemsScrollTop+itemsHeight?scrollT-itemsHeight:liTop-liHeight<itemsScrollTop?liTop-liHeight:itemsScrollTop)}
function nextEnabledItem(next){if(selectItems[next=(selected+1)%optionsLength].disabled)
while(selectItems[next=(next+1)%optionsLength].disabled){}
return next}
function previousEnabledItem(previous){if(selectItems[previous=(selected>0?selected:optionsLength)-1].disabled)
while(selectItems[previous=(previous>0?previous:optionsLength)-1].disabled){}
return previous}
$original.on({refresh:_populate,destroy:function(){$items.add($wrapper).add(_input).remove();$original.removeData(pluginName).removeData('value').off(bindSufix+' refresh destroy open close').unwrap().unwrap()},open:_open,close:_close})};$.fn[pluginName]=function(args,options){return this.each(function(){if(!$(this).data(pluginName))
init(this,args||options);else if(''+args===args)
$(this).trigger(args)})}}(jQuery))